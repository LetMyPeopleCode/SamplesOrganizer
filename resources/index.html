<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>SamplesOrganizer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/samplesOrganizer.css">
  </head>
  <body>
<!-- MODAL FOR INFO -->
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header mtExtra">
        <h1 class="modal-title fs-5" id="exampleModalLabel">About This App</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div id="abt-modal-body" style="padding:10px;">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- END MODAL-->

<!-- MODAL FOR Browse Picker -->
<!-- Modal -->
<div class="modal fade" id="browseHelpModal" tabindex="-1" aria-labelledby="browseHelpModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header mtExtra">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Using The Folder Selector</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div id="abt-modal-body" style="padding:10px;">
        Selecting "Open a samples folder" will open a file dialogue. Navigate to and select the directory you want to open.<br>
        &nbsp;<br>
        The process will gather file information for all files in that folder and its subfolders. 
        <blockquote style="margin:15px; padding:3px; background-color: #BBF; border: 1px solid #33F;"><b>CAUTION</b><br>If you open a folder with thousands of files in it and its subfolders, it could take a long time or possibly overload the app. If this happens, drill down to a subfolder that has fewer files.</blockquote>
      </div>
    </div>
  </div>
</div>
<!-- END MODAL-->


<!-- MODAL FOR FILE INFORMATION HELP -->
<!-- Modal -->
<div class="modal fade" id="FileHelpModal" tabindex="-1" aria-labelledby="FileHelpModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header mtExtra">
        <h1 class="modal-title fs-5" id="exampleModalLabel">About File Information</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div id="abt-modal-body" style="padding:10px; overflow: hidden; overflow-y:auto; max-height:600px;">
        <p>The <b>File Information Area</b> contains information fields about the file and controls for the browsing process. The fields contain information we guessed from the file path, or information you entered/changed. Here are their names and what they represent or do.</p>
        <ul>
          <li><b>File Name:</b> This can be the actual name on disk or you can change it to something more meaningful.</li>
          <li><b>Source:</b> The company or producer that made it.</li>
          <li><b>License:</b> This can be the path to a license file (which we'll autopopulate if we detect a good candidate in the folder of or folders leading to the sound file), the name of a license (like CC-BY). Select <b>Choose</b> to locate the license file on disk or write your own text.</li> <!-- eventually add a feature to apply the license to all files in the same folder -->
          <li><b>Comments:</b> If you have a specific comment you need to record, put it here. (max 1,000 characters - no markup)</li>
          <li><b>Tags:</b> A powerful feature that lets you categorize the files with words/phrases that are meaningful to you. See the tags help for detailed info on tags. We autopopulate with a limited number guessed from the file path information, like BPM, one-shot, etc.</li>
          <li><b>Speed Browse:</b> Check this box if you want to rapidly browse through the list. <b>K</b> keeps the active file, <b>L</b> leaves it. ALL files will be stored in the database with a <b>keep</b> or <b>leave</b> tag. You can then review files with those tags in more depth later with a speed browse or editing their tags manually.</li>
          <li><b>AutoPlay:</b> If on, it autoplays a file when it's selected either through clicking it in the file list or speed browsing.</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<!-- END MODAL-->


<!-- MODAL FOR TAGS HELP -->
<!-- Modal -->
<div class="modal fade" id="TagsHelpModal" tabindex="-1" aria-labelledby="TagsHelpModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header mtExtra">
        <h1 class="modal-title fs-5" id="exampleModalLabel">About Tags</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div id="abt-modal-body" style="padding:10px; overflow: hidden; overflow-y:auto; max-height:600px;">
        <p><b>Tags</b> are short words or phrases that help you categorize a file. You might tag something with <b>120 bpm</b> or <b>funky</b> or <b>good for edm</b>.</p>
        <p>Their power lies in combining them. "<i>Show me files tagged as <b>orchestral</b>, <b>happy</b>, and <b>loop</b>, that are <b>shorter than 20 seconds</b></i>.</p>
        <p>The tags box is separated into three sections:<ol>
          <li><b>Add/Search:</b> Start typing in this section to get suggestions of possible tags. If we suggest one you like, select it to add it. If none we suggest work, finish typing and select <b>Add</b> to add it.</li>
          <li><b>Frequent Tags:</b> The tags you use most often. To start it has a few we include. The more you browse and tag, the more it reflects the tags you actually use.</li>
          <li><b>Assigned Tags:</b> These are tags we either guessed the first time you loaded a file or the ones you've assigned. To remove a tag, click it.</li>
        </ol></p>
        <blockquote style="margin:15px; padding:3px; background-color: #BBF; border: 1px solid #33F;"><b>WARNING:</b> Only lowercase US English letters (a-z), spaces ( ), dashes (-), and underscores (_) are allowed in tags. There's a mechanism that prohibits all others and converts capitals to lowercase. We may add support for symbols outside of US English like ñ and é in the future.</blockquote>
      </div>
    </div>
  </div>
</div>
<!-- END MODAL-->

<!-- MODAL FOR ERRORS -->
<!-- Modal -->
<div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header mtExtra-red">
        <h1 class="modal-title fs-5 center-title" id="errorModalLabel"><b>ERROR</b></h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div id="err-modal-body" style="padding:10px;">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- END MODAL-->
<!-- ------------------------------------------------------------------- -->
<!--                       SPLASH SCREEN                                 --> 
<!-- ------------------------------------------------------------------- -->

<div id="splash_screen" class="container-fluid" style="z-index: 500;" hidden>
  <h1>Splash</h1>



</div>
<!-- ------------------------------------------------------------------- -->
<!--                          T&C SCREEN                                 --> 
<!-- ------------------------------------------------------------------- -->
<!-- This shows and can only be dismissed by accepting the terms or quit -->
<div id="termsandconditions" class="container-fluid" hidden>
  <h1>SamplesOrganizer: Terms and Conditions</h1>

  <div id="tandc"><p><b>THE SOFTWARE YOU ARE ABOUT TO USE IS FREE AND OPEN SOURCE. BY USING IT (CHOOSING THE AGREE BUTTON BELOW, DISMISSING THIS SCREEN BY OTHER MEANS, OR ATTEMPTING TO CIRCUMVENT THIS SCREEN), YOU AGREE TO THE FOLLOWING PROVISIONS.</b></p>

  <p><b>1</b>: You agree to the licenses of this software and the open source components it uses (see the license file in our <a href="#" class="repoclick">Github repository</a>).</p>
  <p><b>2</b>: <b>NO WARRANTY</b> - this software is provided without warranty that it will work at all or will work as you or anyone else expects. You agree to hold the authors of this software harmless for any wanted or unwanted changes or damages it might cause.</p>

  <p><b>WHAT WE BELIEVE IT DOES</b>: Here is a list of the changes to or access to your system and files we expect this software to make or use. It is provided by the authors on a "best estimate" basis that you agree cannot be used to hold the authors or distributors of this software liable for anything it does or does not do.</p>
  <ul>
    <li><b>Can read files in your app data folder as specified by your operating system.</b> This app utilizes the Neutralino.OS API to query your operating system for the correct place to store application data.</li>
    <li><b>Can write files in your app data folder as specified by your operating system.</b> Once it has determined the location of your application data folder, it can create a subfolder for itself in that folder and store configuration and other information for the application (such as its database) there.</li>
    <li><b>Stores Database Information Unencrypted</b>: To the best of our knowledge, the database we use stores file names, paths, license information, your comments, and the tags you assign as JSON formatted plain text. Since this database does not store passwords or anything we consider PII (Personally Identifiable Information), we have chosen not to encrypt the database files to allow for greater efficiency. That means if anyone gets access to your app data folder, they can read the contents of your samples database. If you're really concerned that someone will be able to abuse the knowledge you tagged "70sfunk_drumloop.wav" as "funky," then you'll need to use something else or wait until we start enabling/using encryption on the database. <i>Please Note</i> if you're using disk or folder encryption tools of your own, this will not override that. It just doesn't do its own encryption.</li>
    <li><b>Can read files in folders you specify.</b> When you choose a folder to browse, the application can read a listing of the contents of that folder and all of its subfolders to find files it is capable of using for playing and indexing your collection. It can furthermore read those files in that directory and subdirectory for the purposes of playing and gathering needed data for/about your samples.</li>
    <li><b>Launch a server.</b> As part of the Neutralino framework, OS-based APIs like accessing the file system are provided through a local websocket server. We cannot guarantee this sever is 100% secure as it's a product of a third party framework. If you are highly security conscious, subscribe to Neutralino's mailing lists or forums to get security alerts about this component.</li>
  </ul>

  <p><b>WHAT WE BELIEVE IT DOESN'T DO</b>: The list of things we believe it doesn't do could be infinite (e.g. "does not change the gravitational constant of the solar system"). So this is a list of the items we believe users would be concerned about. Furthermore we may be wrong. While we are not aware of our own original code doing anything we disclaim below, this is built with multiple open source components and you agree to hold us harmless if those components do anything you or we didn't expect.</p>
  <ul>
    <li><b>Does not share personal information or system information.</b> This app does not gather or share personal or identifying information about you, your system, or its contents. For now it is intended as a wholly offline application that does not access any remote servers for any operations.</li>
    <li><b>Does not auto-update.</b> As part of our attempt at wholly offline operation, we have yet to implement online checks that the app has an update available or needs an update. While this is a feature we intend to add at a later date, it is not currently guaranteed to be implemented or work. After it is implemented, it will be subject to the "NO WARRANTY" provision.</li>
  </ul>

  <p>Basically, this software was created and shared for free by developers who wanted this application to exist or wanted to make it better. You can review all the source code at our <a href="#" class="repoclick">Github repository</a>. If you do not have the skills to do it, you can hire your own expert to review it. You agree not to run this software unless you believe you understand and are ready to accept the risks and hold the creators and contributors harmless for any and all behaviors you believe it exhibite or fails to exhibit.</p>
</div>
<p style="text-align: center;"><button id="tcagree" class="btn tnc">I agree</button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <button id="tcno" class="btn tnc">I do not agree</button></p>
</div>

<div id="main_app" class="container-fluid" hidden>
<!-- ------------------------------------------------------------------- -->
<!--                      TOP NAVIGATION                                 --> 
<!-- ------------------------------------------------------------------- -->
<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand" href="#" data-bs-toggle="modal" data-bs-target="#exampleModal"><img src="icons/logo_64.png" height="40" alt="SamplesOrganizer Logo" data-bs-toggle="tooltip" data-bs-title="About this app"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" id="browse_top" aria-current="page" href="#">Browse</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="search_top" href="#">Search</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="settings_top" href="#">Settings</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="help_top" href="#">Help</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<!-- END TOP NAV-->

<!-- ------------------------------------------------------------------- -->
<!--                       BROWSE SCREEN                                 --> 
<!-- ------------------------------------------------------------------- -->
<div id="browse_screen" class="container-fluid full-height main-app row" >
<div class="row">
  <div class="fp-wrapper col-5">
<!--                        FILE PICKER                                  --> 
    <div class="fptop"><button type="button" class="btn btn-primary fpbutton" id="fp-open">Open a samples folder</button>  <a class="navbar-brand" href="#" data-bs-toggle="modal" data-bs-target="#browseHelpModal"><img src="icons/question.png" height="32" alt="SamplesOrganizer Logo" data-bs-toggle="tooltip" data-bs-title="Folder Selector Help"></a></div>
    <div class="filepicker" id="filepicker">
    </div>  
  </div>
  <div class="col-7 br browse-col2">
    <div class="row browse-inner br" >
      <div class = "col-6 maxit br">
<!--                        FILE INFO FORM                               --> 
        <div class = "br maxit"><h3><b>File Information</b> <a class="navbar-brand" href="#" data-bs-toggle="modal" data-bs-target="#FileHelpModal"><img src="icons/question.png" height="32" alt="Question Mark" data-bs-toggle="tooltip" data-bs-title="File Information Help"></a></h3>
            <p><small>File name:</small><br>
            <input type="text" size="35" id="formfilename" style="font-size:11px;"></p>
            <p><small>Source/Creator:</small><br>
            <input type="text" size="35" id="formfilesource" style="font-size:11px;"></p>
            <p><small>License File:</small><br>
            <input type="text" size="25" id="formlicensepath" style="font-size:11px;" disabled> <button id="selectsource">Select</button></p>
            <p><small>Comments:</small><br>
            <textarea id="formcomments" style="font-size:11px;" cols="35" rows="9"></textarea></p>
            
      
            <h3><b>Controls</b></h3>
            <input type="checkbox" value="" id="speedbrowse" style="outline:2px solid #22F"> <b>SpeedBrowse</b><br>
            <input type="checkbox" value="checked" id="autoplay" style="outline:2px solid #22F"> <b>Auto Play</b>


      </div>
    </div>
<div class = "col-6 maxit br">
<!--                              TAGS                                   --> 
        <div class = "br maxit"><h3><b>Tag Browser <a class="navbar-brand" href="#" data-bs-toggle="modal" data-bs-target="#TagsHelpModal"><img src="icons/question.png" height="32" alt="Question Mark" data-bs-toggle="tooltip" data-bs-title="Tags Help"></a></b></h3>
          <p><small>Add/Search Tags</small><br>
          <input id="addtagbox" name="addtaginput" length="30" spellcheck='false' autocorrect='off' typehere> <button>Add</button></p>
          <p><small><b>Popular Tags</b> (click to add)</small><br>
          <div class="taglist" id="populartags"></div></p>
          <p><small><b>This File's Tags</b> (click <i>x</i> to remove)</small><br>
          <div class="taglist" id="filetags"></div></p>
                

        </div>
        </div>
    </div>
    <div class="row">
      <div class="col-12 br player">
        <div class="br player">
          <audio hidden id="hplayer"></audio>
          <midi-player src="" class="midiplayer" hidden id="mplayer"></midi-player>
</midi-player>
          <div id="player-controls">
            <button id="play_button" data-bs-toggle="tooltip" data-bs-html="true" data-bs-title="PLAY on/off (space)<br>RESTART (shift + PLAY)"><img src="icons/player-play.svg" class="playerbutton" id="play_icon"></button> &nbsp; <button id="pause_button" data-bs-toggle="tooltip" data-bs-title="PAUSE on/off (P)"><img src="icons/player-pause.svg" class="playerbutton" id="pause_icon"></button> &nbsp; <button  id="loop_button" data-bs-toggle="tooltip" data-bs-title="LOOP on/off (L)"><img src="icons/player-loop.svg" class="playerbutton" id="loop_icon"></button> &nbsp; <span id="clip_progress" class="playtime">0:00</span> / <span id="clip_length" class="playtime">0:00</span><br><span id="clip_filename" class="clip_file">No file selected</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ------------------------------------------------------------------- -->
<!--                       SEARCH SCREEN                                 --> 
<!-- ------------------------------------------------------------------- -->
<div id="search_screen" class=".container-fluid" hidden>
    <h1>Search</h1>
  </div>
<!-- ------------------------------------------------------------------- -->
<!--                      SETTINGS SCREEN                                --> 
<!-- ------------------------------------------------------------------- -->
  <div id="settings_screen" class=".container-fluid" hidden>
    <h1>Settings</h1>
  </div>

</div>



    <!-- Neutralino.js client. This file is gitignored, 
        because `neu update` typically downloads it.
        Avoid copy-pasting it. 
        -->
    <script src="/js/neutralino.js"></script>
    <!-- Your app's source files -->
    <script src="js/external/popper.min.js"></script>
    <script src="js/external/bootstrap.bundle.min.js"></script>
    <script src="js/external/lokijs.js"></script>
    <script src="js/external/howler.min.js"></script>
    <script src="js/external/html-midi-player.js"></script>
  <!--  <script src="js/external/bootstrap-autocomplete.min.js"></script> -->
    <script src="js/modules/constants.js"></script>
    <script src="js/modules/UIStrings.js"></script>
    <script src="js/modules/model.js"></script>   
    <script src="js/modules/utils.js"></script>
    <script src="js/modules/player.js"></script>
    <script src="js/modules/filedata.js"></script>
    <script src="js/main.js"></script>
    <script>
        // wait for onload to fire, then run launch function
      document.getElementById('tcagree').addEventListener('click',UTILS.tcagree);
      document.getElementById('tcno').addEventListener('click',UTILS.tcno);
      window.onload = async function(){
        await Neutralino.init();
        UTILS.launch();
      }
    </script>
</html>
